(function(){"use strict";var t={1196:function(t,e,o){var r=o(5130),n=o(6768),s=o(4232);const a={id:"app",class:"container"},i={class:"navbar navbar-expand-lg navbar-light bg-light shadow p-3 mb-3"},c={class:"collapse navbar-collapse"},l=["textContent"],u=["disabled"],d=(0,n.Lk)("br",null,null,-1),h={class:"row m-3"},p={class:"form-group col-md-6 m-2"},m=(0,n.Lk)("label",{for:""},"Sort by",-1),v=(0,n.Lk)("option",{value:"title"},"Title",-1),b=(0,n.Lk)("option",{value:"location"},"Location",-1),k=(0,n.Lk)("option",{value:"price"},"Price",-1),f=(0,n.Lk)("option",{value:"spaces"},"Spaces",-1),C=[v,b,k,f],L=(0,n.Lk)("br",null,null,-1),y=(0,n.Lk)("option",{value:"asc"},"Ascending",-1),g=(0,n.Lk)("option",{value:"desc"},"Descending",-1),w=[y,g],O={class:"col-md-6 m-2"},N={key:0},I={key:1};function x(t,e,o,v,b,k){const f=(0,n.g2)("course-list"),y=(0,n.g2)("checkout");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("nav",i,[(0,n.Lk)("div",c,[(0,n.Lk)("h1",{textContent:(0,s.v_)(b.sitename),class:"mt-5"},null,8,l)]),(0,n.Lk)("button",{disabled:0==b.cart.length,onClick:e[0]||(e[0]=(...t)=>k.showCheckout&&k.showCheckout(...t)),class:"btn btn-outline-success btn-lg float-end m-4 p-2"}," Checkout "+(0,s.v_)(k.cartItemCount),9,u),d,(0,n.Lk)("div",h,[(0,n.Lk)("div",p,[m,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>b.sortOption=t),class:"form-control",style:{width:"350px"}},C,512),[[r.u1,b.sortOption]]),L,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>b.sortOrder=t),class:"form-control m-2",style:{width:"350px"}},w,512),[[r.u1,b.sortOrder]])]),(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>b.searchQuery=t),placeholder:"Search lessons..."},null,512),[[r.Jo,b.searchQuery]])])])]),(0,n.Lk)("main",null,[b.showCourse?((0,n.uX)(),(0,n.CE)("div",N,[(0,n.bF)(f,{is:b.currentComponent,onAddcourse:k.addToCart,onCanCart:k.canAddToCart,onCartcounter:k.cartCount},null,8,["is","onAddcourse","onCanCart","onCartcounter"])])):((0,n.uX)(),(0,n.CE)("div",I,[(0,n.bF)(y,{cart:b.cart,onCartCount:k.cartCount,onRemoveItem:k.removeFromCart,onSubmitForm:k.submitForm},null,8,["cart","onCartCount","onRemoveItem","onSubmitForm"])]))])])}o(4114);const A=(0,n.Lk)("option",{value:"title"},"Title",-1),S=(0,n.Lk)("option",{value:"location"},"Location",-1),E=(0,n.Lk)("option",{value:"price"},"Price",-1),F=[A,S,E],T=(0,n.Lk)("option",{value:"asc"},"Ascending",-1),_=(0,n.Lk)("option",{value:"desc"},"Descending",-1),X=[T,_],j={class:"row m-4"},P={class:"card md-4 m-2 shadow"},Q=["src"],U={class:"card-body"},V=["textContent"],J=["innerHTML"],W=["onClick"],$={key:1,disabled:"disabled"},M={key:2},R={key:3},z={key:4};function D(t,e,o,a,i,c){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.searchQuery=t),placeholder:"Search for courses"},null,512),[[r.Jo,i.searchQuery]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.sortOption=t)},F,512),[[r.u1,i.sortOption]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.sortOrder=t)},X,512),[[r.u1,i.sortOrder]]),(0,n.Lk)("div",j,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.sortedCourses,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"col-md-4",key:t.id},[(0,n.Lk)("div",P,[(0,n.Lk)("img",{src:"https://cw-2-smoky.vercel.app/"+t.image,class:"ct height: 300px; width: 100%; mx-auto d-block img-fluid"},null,8,Q),(0,n.Lk)("div",U,[(0,n.Lk)("h2",{textContent:(0,s.v_)(t.title)},null,8,V),(0,n.Lk)("p",{innerHTML:t.description},null,8,J),(0,n.Lk)("p",null,"Location: "+(0,s.v_)(t.location),1),(0,n.Lk)("p",null,"Price: "+(0,s.v_)(t.price),1),(0,n.Lk)("p",null," Available stock: "+(0,s.v_)(t.availableInventory-c.cartCount(t.id)),1),c.canAddToCart(t)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>c.addItem(t),class:"btn btn-outline-info"}," Add to cart ",8,W)):((0,n.uX)(),(0,n.CE)("button",$,"Add to cart")),t.availableInventory===c.cartCount(t.id)?((0,n.uX)(),(0,n.CE)("span",M," All out! ")):t.availableInventory-c.cartCount(t.id)<5?((0,n.uX)(),(0,n.CE)("span",R," Only "+(0,s.v_)(t.availableInventory-c.cartCount(t.id))+" left! ",1)):((0,n.uX)(),(0,n.CE)("span",z,"Buy now!"))])])])))),128))])])}var H={name:"courseList",props:["addcourse","canCart"],data(){return{sitename:"Welcome to After School!",courses:[],searchQuery:"",cart:[],sortOption:"title",sortOrder:"asc"}},created(){this.getCourses()},methods:{async getCourses(){var t="https://cw-2-smoky.vercel.app/collection/courses/",e=await fetch(t);e=await e.json(),this.courses=e,console.log("Courses fetched")},addItem(t){this.$emit("addcourse",t)},canAddToCart(t){return t.availableInventory>this.cartCount(t.id)},cartCount(t){return this.cart.filter((e=>e===t)).length}},computed:{sortedCourses(){var t=[...this.courses],e="asc"===this.sortOrder?1:-1;if(this.searchQuery){var o=this.searchQuery.toLowerCase();t=t.filter((t=>t.title.toLowerCase().includes(o)||t.location.toLowerCase().includes(o)))}return t.sort(((t,o)=>t[this.sortOption]>o[this.sortOption]?1*e:t[this.sortOption]<o[this.sortOption]?-1*e:0))}}},K=o(1241);const Z=(0,K.A)(H,[["render",D]]);var B=Z;const q=(0,n.Lk)("h2",null,"Shopping cart",-1),G={class:"row"},Y=["src"],tt={class:"card-body"},et=["onClick"],ot=(0,n.Lk)("h2",null,"Checkout",-1),rt=(0,n.Lk)("strong",null,"First Name:",-1),nt=(0,n.Lk)("strong",null,"Phone Number:",-1),st=(0,n.Lk)("h2",null,"Order Information",-1),at=["disabled"];function it(t,e,o,a,i,c){return(0,n.uX)(),(0,n.CE)("div",null,[q,(0,n.Lk)("ul",G,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.cart,(t=>((0,n.uX)(),(0,n.CE)("li",{key:t.id,class:"card col-md-3 m-2 shadow"},[(0,n.Lk)("img",{src:t.image,class:"ct height: 300px; width: 100%; mx-auto d-block img-fluid"},null,8,Y),(0,n.Lk)("div",tt,[(0,n.Lk)("h2",null,(0,s.v_)(t.title),1),(0,n.Lk)("p",null,"Location: "+(0,s.v_)(t.location),1),(0,n.Lk)("p",null,"Price: "+(0,s.v_)(t.price),1),(0,n.Lk)("p",null,"Quantity: "+(0,s.v_)(t.count),1),(0,n.Lk)("button",{onClick:e=>c.removeItem(t),class:"btn btn-outline-danger"}," Remove ",8,et)])])))),128))]),ot,(0,n.Lk)("p",null,[rt,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.order.firstName=t),id:"firstName",type:"text",class:"form-control-sm",pattern:"^[a-zA-Z\\s]+$"},null,512),[[r.Jo,i.order.firstName,void 0,{trim:!0}]])]),(0,n.Lk)("p",null,[nt,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.order.phoneNumber=t),id:"phoneNumber",type:"number",class:"form-control-sm"},null,512),[[r.Jo,i.order.phoneNumber,void 0,{number:!0}]])]),st,(0,n.Lk)("p",null,"First Name: "+(0,s.v_)(i.order.firstName),1),(0,n.Lk)("p",null,"phone Number: "+(0,s.v_)(i.order.phoneNumber),1),(0,n.Lk)("button",{type:"submit",disabled:!c.validInput,onClick:e[2]||(e[2]=(...t)=>c.submitForm&&c.submitForm(...t))}," Place Order ",8,at)])}var ct={name:"Form-Component",props:["cart"],data(){return{order:{firstName:"",phoneNumber:""}}},methods:{removeItem(t){this.$emit("remove-item",t)},submitForm(){this.$emit("submit-form",{Name:this.order.firstName,PhoneNumber:this.order.phoneNumber}),console.log("Form submitted with:",this.name,this.address),this.name="",this.address=""},async checkout(){var t={courses:[...this.cart],firstName:this.order.firstName,phoneNumber:this.order.phoneNumber};this.cart.forEach((t=>{t=this.courses.filter((e=>e.id==t))[0],t.availableInventory-=this.cartCount(t.id),fetch(`https://cw-2-smoky.vercel.app/collection/courses/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({availableInventory:t.availableInventory})})})),await fetch("https://cw-2-smoky.vercel.app/collection/orders/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),alert("order successful"),this.showCourse=!0}},computed:{validInput(){return/^[a-zA-Z\s]+$/.test(this.order.firstName)&&/^\d+$/.test(this.order.phoneNumber)}}};const lt=(0,K.A)(ct,[["render",it]]);var ut=lt,dt={name:"app",data(){return{currentComponent:"courseList",sitename:"Welcome to After School!",courses:[],searchQuery:"",cart:[],showCourse:!0,sortOption:"title",sortOrder:"asc",order:{firstName:"",phoneNumber:""}}},components:{courseList:B,checkout:ut},created(){this.getCourses()},methods:{toggleComponent(){this.currentComponent="courseList"===this.currectComponent?"checkout":"courseList"},async getCourses(){var t="https://cw-2-smoky.vercel.app/collection/courses/",e=await fetch(t);e=await e.json(),this.courses=e,console.log("fetched")},async searchCourses(){var t={search:this.searchQuery,sort:this.sortOption,order:this.sortOrder},e=await fetch("https://cw-2-smoky.vercel.app/collection/courses/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});e=await e.json(),this.courses=e,console.log("fetched")},addToCart(t){this.cart.push(t),t.availableInventory--},removeFromCart(t){const e=this.cart.indexOf(t);-1!==e&&this.cart.splice(e,1)},showCheckout(){this.showCourse=!this.showCourse},submitForm(){alert("Order submitted!")},canAddToCart(t){return t.availableInventory>this.cartCount(t.id)},cartCount(t){let e=0;for(let o=0;o<this.cart.length;o++)this.cart[o]===t&&e++;return e}},computed:{cartItemCount(){return this.cart.length},cartCourses(){const t={};return this.cart.forEach((e=>{if(t[e])t[e].count++;else{const o=this.courses.find((t=>t.id===e));o&&(t[e]={course:o,count:1})}})),Object.values(t)},sortedCourses(){var t=this.courses,e="asc"===this.sortOrder?1:-1;if(this.searchQuery){var o=this.searchQuery.toLowerCase();t=t.filter((t=>t.title.toLowerCase().includes(o)||t.location.toLowerCase().includes(o)))}return t.sort(((t,o)=>t[this.sortOption]>o[this.sortOption]?1*e:t[this.sortOption]<o[this.sortOption]?-1*e:0))}}};const ht=(0,K.A)(dt,[["render",x]]);var pt=ht;const mt=new WebSocket("ws://10.33.25.17:8080/ws");mt.onopen=()=>{console.log("WebSocket is open now.")},mt.onmessage=t=>{console.log("WebSocket message received:",t.data)},mt.onerror=t=>{console.error("WebSocket error observed:",t)},mt.onclose=()=>{console.log("WebSocket is closed now.")},(0,r.Ef)(pt).mount("#app")}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,r,n,s){if(!r){var a=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],s=t[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](r[c])}))?r.splice(c--,1):(i=!1,s<a&&(a=s));if(i){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[r,n,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,s,a=r[0],i=r[1],c=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(c)var u=c(o)}for(e&&e(r);l<a.length;l++)s=a[l],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(u)},r=self["webpackChunkcw3"]=self["webpackChunkcw3"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(1196)}));r=o.O(r)})();
//# sourceMappingURL=app.b62b7e20.js.map